<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Manje smeće - više sreće</title>

    <!-- Font Awesome Icons -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic'
          rel='stylesheet' type='text/css'>

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">

    <!-- Theme CSS - Includes Bootstrap -->
    <link href="css/creative.min.css" rel="stylesheet">

    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body id="page-top">

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
    <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">KOMBINACIJA</a>

        <ul class="nav navbar-nav navbar-right">
            <li>
                <button class="btn btn-primary btn-xl js-scroll-trigger" onclick="logMeOut();" id="logout"> Odjavi se
                </button>
            </li>
            <li>
                <button class="btn btn-primary btn-xl js-scroll-trigger"
                        onclick="window.location.replace('registracija.html');" id="register">
                    Registriraj se
                </button>
            </li>
        </ul>
    </div>
</nav>

<!-- Masthead -->
<header class="masthead">
    <div class="container h-100">
        <div class="row h-100 align-items-center justify-content-center text-center">
            <div class="col-lg-10 align-self-end">
                <h1 class="text-uppercase text-white font-weight-bold" id="welcome-msg">Pomozite nam održati grad
                    čistim</h1>
                <hr class="divider my-4">
            </div>
            <div class="col-lg-8 align-self-baseline">
                <p class="text-white-75 font-weight-light mb-5">Svaka puna kanta može biti prijavljena!</p>
                <a class="btn btn-primary btn-xl js-scroll-trigger" href="prijava.html" id="login-link">Prijavi se</a>
            </div>
        </div>
    </div>
</header>


<!--Google map-->
<div align="center">
  <div class="btn-group" role="group" style="padding-top: 50px; padding-bottom: 50px">
      <button id="btn-history" type="button" class="btn btn-primary btn-xl" style="display: none;">Zapisi</button>
      <button id="btn-ping-full" type="button" class="btn btn-primary btn-xl" style="display: none;">Prijavi kao "PUN"</button>
      <button id="btn-ping-urgent" type="button" class="btn btn-primary btn-xl" style="display: none;">Prijavi kao "PREPUN"</button>
      <button id="btn-ping-empty" type="button" class="btn btn-primary btn-xl" style="display: none;">Prijavi kao "PRAZAN"</button>
      <button id="btn-add-fav" type="button" class="btn btn-primary btn-xl" style="display: none;">Dodaj u "OMILJENE"</button>
      <!-- Mozemo napraviti da su omiljeni oznaceni plavim tagom, mislim da je to najlakse i najljepse vizualno -->
      <button id="btn-del-fav" type="button" class="btn btn-primary btn-xl" style="display: none;">Obriši iz "OMILJENIH"</button>
  </div>
  <div id="map_canvas" style=" width: 100%; height: 800px;">
  </div>
</div>

<!-- Services Section -->
<section class="page-section" id="services">
    <div class="container">
        <h2 class="text-center mt-0">ZAŠTO KOMBINACIJA?</h2>
        <hr class="divider my-4">
        <div class="row">
            <div class="col-lg-3 col-md-6 col-6 text-center">
                <div class="mt-5">
                    <i class="fas fa-4x fa-cogs text-primary mb-4"></i>
                    <h3 class="h4 mb-2">Zato što je jednostavna.</h3>
                    <p class="text-muted mb-0">Intuitivna aplikacija za prijavu punih kanti!</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-6 text-center">
                <div class="mt-5">
                    <i class="fas fa-4x fa-laptop-code text-primary mb-4"></i>
                    <h3 class="h4 mb-2">Zato jer radi na svim uređajima.</h3>
                    <p class="text-muted mb-0">Neovisno o tome koritite li laptop ili mobitel!</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-6 text-center">
                <div class="mt-5">
                    <i class="fas fa-4x fa-map text-primary mb-4"></i>
                    <h3 class="h4 mb-2">Zato jer pokriva cijeli grad.</h3>
                    <p class="text-muted mb-0">Gotovo sve kante su obilježene!</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-6 text-center">
                <div class="mt-5">
                    <i class="fas fa-4x fa-heart text-primary mb-4"></i>
                    <h3 class="h4 mb-2">Zato što je od građana za građane.</h3>
                    <p class="text-muted mb-0">Aplikacija je razvijena od strane studenata FER-a za sve!</p>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Footer -->
<footer class="bg-light py-5">
    <div class="container">
        <div class="small text-center text-muted">Copyright &copy; OPP Kombinacija</div>
    </div>
</footer>

<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Plugin JavaScript -->
<script src="vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

<!-- Custom scripts for this template -->
<script src="js/creative.min.js"></script>
<script src="js/server.api.js"></script>
<script src="js/auth.js"></script>
<script src="js/designer.js"></script>
<script src="js/public_requests.js"></script>
<script src="js/citizen_requests.js"></script>
<script>
    window.onload = handleDisplay();
</script>

<!-- Skripta za random markere na google mapi -->
<script src="https://maps.googleapis.com/maps/api/js?v=3.11&sensor=false" type="text/javascript"></script>

  <script type="text/javascript">

    var googleMap = configMap();

    function getLocation(recipient, errorHandler) {
      if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(recipient, errorHandler);
      } else {
      //  initMapWithHoods();
      }
    }

    function configMap() {
      var options = {
        zoom: 14,
        center: new google.maps.LatLng(45.79964, 15.97880), // centered Zagreb
        mapTypeId: google.maps.MapTypeId.HYBRID,
        mapTypeControl: false
      }
      var map = new google.maps.Map(document.getElementById('map_canvas'), options);
      return map;
    }

    function initMap(position) {
      map(position.coords.latitude, position.coords.longitude, function (containers) {
        for(var i=0; i<containers.length; i++){
          var c = containers[i];
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(c.latitude, c.longitude),
            map: googleMap,
            title: "Kontejner "+i+" ("+c.id+")",
            contID: c.id
          });

          google.maps.event.addListener(marker, 'click', function () {
            var cid = this.contID;
            var bHisto = document.getElementById("btn-history");
            var bPingf = document.getElementById("btn-ping-full");
            var bPingu = document.getElementById("btn-ping-urgent");
            var bPinge = document.getElementById("btn-ping-empty");
            var bFava = document.getElementById("btn-add-fav");
            var bFavd = document.getElementById("btn-del-fav");
            if(getLoggedInUser()){
              bHisto.style.display = "block";
              //bHisto.onclick = ...
              bPingf.style.display = "block";
              bPingf.onclick = function(){ pingFull(cid) };
              bPingu.style.display = "block";
              bPingu.onclick = function(){ pingUrgent(cid) };
              bPinge.style.display = "block";
              bPinge.onclick = function(){ pingEmpty(cid) };
              bFava.style.display = "block";
              bFava.onclick = function(){ postFavorite(cid) };
              bFavd.style.display = "block";
              bFavd.onclick = function(){ deleteFavorite(cid) };
            } else {
              bHisto.style.display = "block";
            }
          });
        }
      });

    }
    function handleError(error){
      //initMapWithHoods();
    }

    getLocation(initMap, handleError);
  </script>

</body>

</html>
